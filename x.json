{
  "name": "dom",
  "description": "DOM components for ChiÏ‡",
  "version": "0.0.2",
  "repository": {
    "type": "git",
    "url": "https://github.com/nodule/dom.git"
  },
  "dependencies": {
    "keyboard": "0.x.x",
    "domify": "1.x.x",
    "load-script": "0.x.x"
  },
  "nodes": [
    {
      "ports": {
        "input": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          },
          "event": {
            "type": "string",
            "enum": [
              "select",
              "change",
              "submit",
              "reset",
              "focus",
              "blur"
            ],
            "title": "Dom Event"
          }
        },
        "output": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          },
          "event": {
            "type": "object",
            "title": "Event"
          }
        }
      },
      "phrases": {
        "active": "Adding {{input.event}} handler"
      },
      "description": "Add Form Event Listener",
      "ns": "dom",
      "name": "addFormEvent",
      "fn": "output = [input.element, 'addEventListener', input.event];\n"
    },
    {
      "ports": {
        "input": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          },
          "event": {
            "type": "string",
            "enum": [
              "keydown",
              "keypress",
              "keyup"
            ],
            "title": "Dom Event"
          }
        },
        "output": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          },
          "event": {
            "type": "object",
            "title": "Event"
          }
        }
      },
      "phrases": {
        "active": "Adding {{input.event}} handler"
      },
      "description": "Add Keyboard Event Listener",
      "ns": "dom",
      "name": "addKeyboardEvent",
      "fn": "output = [input.element, 'addEventListener', input.event];\n"
    },
    {
      "ports": {
        "input": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          },
          "preventDefault": {
            "type": "boolean",
            "title": "Prevent Default Event",
            "default": true
          },
          "event": {
            "type": "string",
            "enum": [
              "click",
              "dblclick",
              "mousedown",
              "mouseup",
              "mouseover",
              "mousemove",
              "mouseout",
              "dragstart",
              "drag",
              "dragenter",
              "dragleave",
              "dragover",
              "drop",
              "dragend"
            ],
            "title": "Dom Event"
          }
        },
        "output": {
          "element": {
            "type": "any",
            "title": "Element"
          },
          "event": {
            "type": "object",
            "title": "Event"
          }
        }
      },
      "phrases": {
        "active": "Adding {{input.event}} handler"
      },
      "description": "Add Mouse Event Listener",
      "ns": "dom",
      "name": "addMouseEvent",
      "fn": "output = function(cb) {\n\n  input.element.addEventListener(input.event, function(ev) {\n\n    if(input.preventDefault) ev.preventDefault();\n\n    cb({\n      element: input.element,\n      event: ev\n    });\n\n  }, false);\n\n};\n"
    },
    {
      "ports": {
        "input": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          },
          "event": {
            "type": "string",
            "enum": [
              "DOMSubtreeModified",
              "DOMNodeInserted",
              "DOMNodeRemoved",
              "DOMNodeRemovedFromDocument",
              "DOMNodeInsertedIntoDocument",
              "DOMAttrModified",
              "DOMCharacterDataModified"
            ],
            "title": "Dom Event"
          }
        },
        "output": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          },
          "event": {
            "type": "object",
            "title": "Event"
          }
        }
      },
      "phrases": {
        "active": "Adding {{input.event}} handler"
      },
      "description": "Add Mutation Event Listener",
      "ns": "dom",
      "name": "addMutationEvent",
      "fn": "output = [input.element, 'addEventListener', input.event];\n"
    },
    {
      "ports": {
        "input": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          },
          "event": {
            "type": "string",
            "enum": [
              "pointerdown",
              "pointerup",
              "pointercancel",
              "pointermove",
              "pointerover",
              "pointerout",
              "pointerenter",
              "pointerleave",
              "gotpointercapture",
              "lostpointercapture"
            ],
            "title": "Pointer Event"
          }
        },
        "output": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          },
          "event": {
            "type": "object",
            "title": "Event"
          }
        }
      },
      "phrases": {
        "active": "Adding {{input.event}} handler"
      },
      "description": "Add Pointer Event Listener",
      "ns": "dom",
      "name": "addPointerEvent",
      "fn": "output = [input.element, 'addEventListener', input.event];\n"
    },
    {
      "ports": {
        "input": {
          "url": {
            "type": "string",
            "title": "Script Url"
          }
        },
        "output": {}
      },
      "require": {
        "load-script": "0.x.x"
      },
      "phrases": {
        "active": "Attaching script {input.url}"
      },
      "description": "Adds a script to the head of the HTML page",
      "ns": "dom",
      "name": "addScript",
      "fn": "on.input.url = function() {\n  load_script.load(data, function() {\n\n  });\n}\n"
    },
    {
      "ports": {
        "input": {
          "url": {
            "type": "string",
            "format": "url",
            "title": "Script Url"
          }
        },
        "output": {}
      },
      "phrases": {
        "active": "Attaching script {input.url}"
      },
      "description": "Adds a stylesheet to the head of the HTML page",
      "ns": "dom",
      "name": "addStylesheet",
      "fn": "on.input.url = function() {\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var script = document.createElement('link');\n\n  script.rel  = 'stylesheet';\n  script.type = 'text/css';\n  script.href = data;\n  head.appendChild(script);\n\n};\n"
    },
    {
      "ports": {
        "input": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          },
          "event": {
            "type": "string",
            "enum": [
              "touchstart",
              "touchend",
              "touchmove",
              "touchenter",
              "touchleave",
              "touchcancel"
            ],
            "title": "Touch Event"
          }
        },
        "output": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          },
          "event": {
            "type": "object",
            "title": "Event"
          }
        }
      },
      "phrases": {
        "active": "Adding {{input.event}} handler"
      },
      "description": "Add Touch Event Listener",
      "ns": "dom",
      "name": "addTouchEvent",
      "fn": "output = [input.element, 'addEventListener', input.event];\n"
    },
    {
      "ports": {
        "input": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          },
          "event": {
            "type": "string",
            "enum": [
              "focusin",
              "focusout",
              "DOMActivate"
            ],
            "title": "Dom Event"
          }
        },
        "output": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          },
          "event": {
            "type": "object",
            "title": "Event"
          }
        }
      },
      "phrases": {
        "active": "Adding {{input.event}} handler"
      },
      "description": "Add UI Event Listener",
      "ns": "dom",
      "name": "addUIEvent",
      "fn": "output = [input.element, 'addEventListener', input.event];\n"
    },
    {
      "ports": {
        "input": {
          "message": {
            "title": "Message",
            "type": "any",
            "required": "true"
          }
        }
      },
      "phrases": {
        "active": "Showing alert"
      },
      "description": "Alert",
      "title": "Alert",
      "ns": "dom",
      "name": "alert",
      "fn": "alert(input.message);\n"
    },
    {
      "ports": {
        "input": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          },
          "child": {
            "type": "HTMLElement",
            "async": true,
            "title": "Child Element"
          }
        },
        "output": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          },
          "out": {
            "type": "object"
          }
        }
      },
      "phrases": {
        "active": "Adding child node"
      },
      "async": true,
      "description": "dom appendChild",
      "ns": "dom",
      "name": "appendChild",
      "fn": "on.input.child = function() {\n\n  output( {\n    element: input.element,\n    out: input.element.appendChild(data)\n  } );\n\n}\n"
    },
    {
      "ports": {
        "input": {
          "in": {
            "type": "string",
            "title": "Tagname",
            "async": true,
            "default": "div"
          }
        },
        "output": {
          "out": {
            "type": "HTMLElement"
          }
        }
      },
      "phrases": {
        "active": "Creating element"
      },
      "description": "dom createElement",
      "async": true,
      "ns": "dom",
      "name": "createElement",
      "fn": "on.input.in = function() {\n  output( { out: document.createElement(data) });\n}\n"
    },
    {
      "ports": {
        "input": {
          "window": {
            "type": "Window",
            "title": "Window",
            "required": false
          }
        },
        "output": {
          "window": {
            "type": "Window",
            "title": "Window",
            "required": false
          },
          "document": {
            "type": "HTMLDocument"
          }
        }
      },
      "phrases": {
        "active": "Providing the dom document of the current window"
      },
      "expose": [
        "window"
      ],
      "description": "dom document",
      "ns": "dom",
      "name": "document",
      "fn": "win = input.window || win;\noutput = {\n  document: win.document,\n  window: win\n}\n"
    },
    {
      "ports": {
        "input": {
          "in": {
            "title": "Html",
            "type": "string",
            "format": "html",
            "required": "true"
          }
        },
        "output": {
          "out": {
            "title": "Dom Elements",
            "type": [
              "HTMLElement",
              "DocumentFragment"
            ]
          }
        }
      },
      "phrases": {
        "active": "Domifying HTML"
      },
      "require": {
        "domify": "0.x.x"
      },
      "description": "Turn HTML into DOM elements x-browser",
      "title": "Domify",
      "ns": "dom",
      "name": "domify",
      "fn": "output.out = domify(input.in);\n"
    },
    {
      "ports": {
        "input": {
          "element": {
            "title": "Element",
            "type": "HTMLElement",
            "async": true
          },
          "attribute": {
            "title": "Attribute",
            "type": "string"
          }
        },
        "output": {
          "element": {
            "type": "HTMLElement"
          }
        }
      },
      "phrases": {
        "active": "Getting attribute: {{input.attribute}}"
      },
      "expose": [
        "document"
      ],
      "description": "Get attribute",
      "async": true,
      "title": "Get Attribute",
      "ns": "dom",
      "name": "getAttribute",
      "fn": "on.input.element = function() {\n  output( {\n    element: data,\n    attribute: data.getAttribute(input.attribute)\n  });\n}\n"
    },
    {
      "ports": {
        "input": {
          "id": {
            "title": "ID",
            "type": "string",
            "async": true,
            "required": "true"
          }
        },
        "output": {
          "element": {
            "type": "HTMLElement"
          }
        }
      },
      "phrases": {
        "active": "Getting element with id: {{input.id}}"
      },
      "expose": [
        "document"
      ],
      "description": "[Get element by ID](https://developer.mozilla.org/en-US/docs/Web/API/document.getElementById)",
      "async": true,
      "title": "getElementById",
      "ns": "dom",
      "name": "getElementById",
      "fn": "on.input.id = function() {\n  output( { element: document.getElementById(data) } );\n}\n"
    },
    {
      "ports": {
        "input": {
          "element": {
            "type": "HTMLElement",
            "async": true,
            "title": "Dom Element"
          }
        },
        "output": {
          "element": {
            "type": "HTMLElement",
            "async": true,
            "title": "Dom Element"
          },
          "html": {
            "type": "string",
            "format": "html",
            "title": "HTML"
          }
        }
      },
      "phrases": {
        "active": "Getting html"
      },
      "description": "dom getHtml",
      "async": true,
      "ns": "dom",
      "name": "getHtml",
      "fn": "on.input.element = function() {\n  output( {\n    element: data,\n    html: data.innerHTML\n  } );\n}\n"
    },
    {
      "ports": {
        "input": {
          "element": {
            "type": "HTMLElement",
            "async": true,
            "title": "Dom Element"
          }
        },
        "output": {
          "element": {
            "type": "HTMLElement",
            "async": true,
            "title": "Dom Element"
          },
          "text": {
            "type": "string",
            "title": "Text"
          }
        }
      },
      "phrases": {
        "active": "Getting text"
      },
      "description": "dom getText",
      "async": true,
      "ns": "dom",
      "name": "getText",
      "fn": "on.input.element = function() {\n  output( {\n    element: data,\n    text: data.innerText\n  } );\n}\n"
    },
    {
      "ports": {
        "input": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          }
        },
        "output": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          },
          "height": {
            "type": "number",
            "title": "Height"
          }
        }
      },
      "phrases": {
        "active": "Calculating height"
      },
      "description": "dom height",
      "ns": "dom",
      "name": "height",
      "fn": "output = {\n  element: input.element,\n  height: input.element.getBoundingClientRect().height\n};\n"
    },
    {
      "ports": {
        "input": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          },
          ":start": {
            "type": "any",
            "title": "Start"
          }
        },
        "output": {
          "element": {
            "type": "any",
            "title": "Dom Element"
          }
        }
      },
      "phrases": {
        "active": "Hiding"
      },
      "description": "dom hide",
      "ns": "dom",
      "name": "hide",
      "fn": "input.element.style.display = 'none';\n\noutput = { element: input.element };\n"
    },
    {
      "ports": {
        "input": {
          "src": {
            "type": "string",
            "async": true,
            "title": "Source path"
          }
        },
        "output": {
          "image": {
            "type": "object",
            "title": "Image"
          }
        }
      },
      "phrases": {
        "active": "Creating Image"
      },
      "description": "Create an image",
      "async": true,
      "ns": "dom",
      "name": "image",
      "fn": "on.input.src = function() {\n  var img = new Image();\n  img.onload = function() {\n    output( { image: this } );\n  }.bind(img);\n  img.src = data;\n}\n"
    },
    {
      "ports": {
        "input": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          },
          "in": {
            "type": "string",
            "title": "Key(s)",
            "description": "a string that can be any key name or a combination of key names separated by '+' or '->'. The '+' combinator requires the keys be held together, '->' requires they be pressed in a specific sequence."
          },
          "filter": {
            "type": "string",
            "enum": [
              "activate",
              "release",
              "repeat",
              "press"
            ],
            "title": "Filter",
            "default": null
          }
        },
        "output": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          },
          "out": {
            "type": "any",
            "title": "Keyboard event(s)"
          }
        }
      },
      "require": {
        "keyboard": "0.x.x"
      },
      "phrases": {
        "active": "Handling keyboard"
      },
      "description": "Gives the keyboard a first class identity, normalizes keyboard events across browsers, and allows binding to multiple keys.",
      "ns": "dom",
      "name": "keyboard",
      "fn": "var kb = new keyboard(input.element);\n\n// todo: should be async, output is mixed now. see the docs.\noutput = [kb, 'on', input.in, input.filter];\n"
    },
    {
      "ports": {
        "input": {
          "window": {
            "type": "Window",
            "title": "Window"
          },
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          }
        },
        "output": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          },
          "top": {
            "type": "number",
            "title": "Top"
          },
          "left": {
            "type": "number",
            "title": "Left"
          },
          "width": {
            "type": "number",
            "title": "Width"
          },
          "height": {
            "type": "number",
            "title": "Height"
          }
        }
      },
      "phrases": {
        "active": "Calculating offset"
      },
      "description": "dom offset",
      "ns": "dom",
      "name": "offset",
      "fn": "var rect = input.element.getBoundingClientRect();\noutput = {\n  element: input.element,\n  left: rect.left + input.win.pageXOffset,\n  top: rect.top + input.win.pageYOffset,\n  width: rect.width,\n  height: rect.height\n};\n"
    },
    {
      "ports": {
        "input": {
          "element": {
            "title": "Element",
            "type": "HTMLElement",
            "default": null
          },
          "selector": {
            "title": "Selector",
            "type": "string"
          }
        },
        "output": {
          "element": {
            "title": "Element",
            "type": "HTMLElement",
            "default": null
          },
          "out": {
            "type": "object"
          }
        }
      },
      "phrases": {
        "active": "Gathering elements matching criteria: {{input.selector}}"
      },
      "expose": [
        "document"
      ],
      "description": "[Document query selector](https://developer.mozilla.org/en-US/docs/Web/API/document.querySelector)",
      "title": "querySelector",
      "ns": "dom",
      "name": "querySelector",
      "fn": "var el = input.element ? input.element : document;\noutput = {\n  element: el,\n  out: el.querySelector(input.selector)\n}\n"
    },
    {
      "ports": {
        "input": {
          "element": {
            "title": "Element",
            "type": "HTMLElement",
            "default": null
          },
          "selector": {
            "title": "Selector",
            "type": "string",
            "required": true
          }
        },
        "output": {
          "element": {
            "title": "Element",
            "type": "HTMLElement",
            "default": null
          },
          "selection": {
            "type": "object"
          }
        }
      },
      "phrases": {
        "active": "Gathering all elements matching criteria: {{input.selector}}"
      },
      "description": "[Document querySelectorAll](https://developer.mozilla.org/en-US/docs/Web/API/document.querySelectorAll)",
      "expose": [
        "window",
        "document"
      ],
      "title": "querySelectorAll",
      "ns": "dom",
      "name": "querySelectorAll",
      "fn": "var el = input.element ? input.element : document;\noutput = {\n  element: el,\n  out: el.querySelectorAll(input.selector)\n}\n"
    },
    {
      "ports": {
        "input": {
          "element": {
            "title": "Element",
            "type": "HTMLElement",
            "async": true
          },
          "attribute": {
            "title": "Attribute",
            "type": "string"
          },
          "value": {
            "title": "Value",
            "type": "string"
          }
        },
        "output": {
          "element": {
            "type": "HTMLElement"
          }
        }
      },
      "phrases": {
        "active": "Setting attribute: {{input.attribute}}"
      },
      "expose": [
        "document"
      ],
      "description": "Adds a new attribute or changes the value of an existing attribute on the specified element.",
      "async": true,
      "title": "Set Attribute",
      "ns": "dom",
      "name": "setAttribute",
      "fn": "on.input.element = function() {\n  data.setAttribute(input.attribute, input.value);\n  output( {\n    element: data\n  });\n}\n"
    },
    {
      "ports": {
        "input": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          },
          "html": {
            "type": "string",
            "format": "html",
            "title": "html"
          }
        },
        "output": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          }
        }
      },
      "phrases": {
        "active": "Adding html"
      },
      "description": "dom setHtml",
      "ns": "dom",
      "name": "setHtml",
      "fn": "input.element.innerHTML = input.html;\noutput = { element: input.element };\n"
    },
    {
      "ports": {
        "input": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          },
          "text": {
            "type": "string",
            "title": "text"
          }
        },
        "output": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          }
        }
      },
      "phrases": {
        "active": "Adding text"
      },
      "description": "dom setText",
      "ns": "dom",
      "name": "setText",
      "fn": "input.element.innerText = input.text;\noutput = { element: input.element };\n"
    },
    {
      "ports": {
        "input": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          },
          ":start": {
            "type": "any",
            "title": "Start"
          }
        },
        "output": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          }
        }
      },
      "phrases": {
        "active": "Showing"
      },
      "description": "dom show",
      "ns": "dom",
      "name": "show",
      "fn": "input.element.style.display = 'block';\n\noutput = { element: input.element };\n"
    },
    {
      "ports": {
        "input": {
          "selector": {
            "type": "string",
            "title": "Frame Selector",
            "required": true
          }
        },
        "output": {
          "window": {
            "type": "Window",
            "title": "Window",
            "required": false
          }
        }
      },
      "phrases": {
        "active": "Warping to frame {{input.selector}}"
      },
      "expose": [
        "window",
        "document"
      ],
      "description": "dom warp",
      "ns": "dom",
      "name": "warp",
      "fn": "output = {\n  window: document.querySelector(input.selector).contentWindow\n}\n"
    },
    {
      "ports": {
        "input": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          }
        },
        "output": {
          "element": {
            "type": "HTMLElement",
            "title": "Dom Element"
          },
          "width": {
            "type": "number",
            "title": "Width"
          }
        }
      },
      "phrases": {
        "active": "Calculating width"
      },
      "description": "dom width",
      "ns": "dom",
      "name": "width",
      "fn": "output = {\n  element: input.element,\n  width: input.element.getBoundingClientRect().width\n};\n"
    }
  ],
  "twigs": []
}